<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <link rel="icon" type="image/png" href="img/black-snooker-number-eight-file-free-png.png"/>
    <link rel="stylesheet" href="css/Style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Manager</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Playfair+Display:wght@400;700&display=swap"
          rel="stylesheet">
</head>
<body class="main-container">
    <section class="container_manager">
        <h1>Gestor del Menú</h1>
        <button class="button" id="btn-open-add" type="button">Agregar Producto</button>
        <table class="table" aria-label="Tabla de productos">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Descripción</th>
                    <th>Precio</th>
                    <th>Tipo</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="tapas">
                <!-- Filas generadas dinámicamente: tapas -->
            </tbody>
            <tbody id="bebidas">
                <!-- Filas generadas dinámicamente: bebidas -->
            </tbody>
            <tbody id="postres">
                <!-- Filas generadas dinámicamente: postres -->
            </tbody>
        </table>
        <!-- Script para gestión dinámica -->
        <script src="src/manager.js" type="module"></script>
        <button class="button" id="btn-gen-qr">Generar QR</button>
    </section>

    <!-- Modal para crear/editar producto -->
    <div id="modal-form" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <button class="modal-close" id="modal-close" aria-label="Cerrar">×</button>
            <h2 id="modal-title">Agregar producto</h2>
            <form id="form-insert" class="form-insert" action="" autocomplete="off">
                <input type="hidden" id="editing_id" value="">
                <div class="form-row">
                    <label for="input_name">Nombre<br>
                        <input id="input_name" name="nombre" type="text" placeholder="Ingresa el nombre del producto" required>
                    </label>
                    <span class="error_msg" id="error_name"></span>
                </div>

                <div class="form-row">
                    <label for="input_des">Descripcion<br>
                        <input id="input_des" name="descripcion" type="text" placeholder="Ingresa la descripcion del producto">
                    </label>
                </div>

                <div class="form-row">
                    <label for="input_pre">Precio<br>
                        <input id="input_pre" name="precio" type="number" step="0.01" placeholder="Ingresa el precio del producto" required>
                    </label>
                    <span class="error_msg" id="error_consult"></span>
                </div>

                <div class="form-row">
                    <label for="producto_tipo">Tipo de Producto<br>
                        <select name="producto_tipo" id="producto_tipo">
                            <option value="tapas">Tapa</option>
                            <option value="bebidas">Bebida</option>
                            <option value="postres">Postre</option>
                        </select>
                    </label>
                </div>

                <div class="actions">
                    <button type="button" class="button" id="modal-cancel">Cancelar</button>
                    <input type="submit" class="button" id="form-submit" value="Registrar Producto">
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de confirmación para eliminar producto -->
    <div id="modal-delete" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modal-delete-title">
            <h3 id="modal-delete-title">Confirmar eliminación</h3>
            <p id="modal-delete-text">¿Desea eliminar este producto?</p>
            <div class="actions">
                <button type="button" class="button" id="modal-delete-cancel">Cancelar</button>
                <button type="button" class="button" id="modal-delete-confirm">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Modal para mostrar QR -->
    <div id="modal-qr" class="modal" aria-hidden="true">
        <div class="modal-content">
            <button class="modal-close" id="modal-qr-close">×</button>
            <h3 id="modal-qr-title">Código QR del Menú</h3>

            <div id="qrcode" style="display:flex; justify-content:center; padding: 20px; background: white; margin: 15px 0;"></div>

            <div class="actions">
                <button type="button" class="button" id="modal-qr-cancel">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Footer del manager (coherente con patrón de la página principal) -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <h4 class="title">Gestor del Menú</h4>
            <p class="muted">Administración y edición de productos.</p>
            <nav aria-label="Enlaces del pie de página">
                <a href="index.html" class="footer-link">Desplegar Menú</a>
            </nav>
            <div class="credits">&copy; <span id="year"></span> Tu Restaurante</div>
        </div>
    </footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script src="src/manager.js" type="module"></script>
</body>
</html>
